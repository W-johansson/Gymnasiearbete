\ifx\main\undefined\input{main.tex}\endinput\fi

\long\def\sammanfattning{
% inledning
\noindent To operate various functions inclinometers are used in vehicles,
since the instrument is prone to measuring errors---such as white noice and it
being unable to differentiate acceleration from inclination--- it needs to be
error compensated.
We choose to use an artificial neural network for the compensation,
%we choose it over other methods such as mathematical filters for its ability to
consisting of artificial neurons arranged in an architecture where each and
every neuron have an activation function---the sigmoid
function---and an overall training algorithm---stochastic gradient descent.
With varibables  as: weights, biases, numbers of neurons in the hidden
layer, learing rate, size of the minibatch and the feedback delay.
% frågeställningar
We sought to identify the best configuration of the network, id est the values
of our variables that produce the smallest deviation from the validation data,
and use it to determine how well it performed the compensation and thereby if
it would be suiteable for usage in a real vehicle.
% metod
Our method was to mount the inclinometer and a GPS to calculate the inclination
the vehcile traveled in and afterwards match the files and use this as the
training data for the network.
The initial configurations of the nets were randomized.
% resultat
The result set the mean squared error to
\num[round-precision=3]{0.002055976870427035} which correspond to an average
offset of \SI[round-precision=3]{2.7205728686321}{\percent}.
% diskussion
We concluded that our compensated inclination would not suffice for real usage
due to difficulties correlating the calculated inclinatoin with the observed
one. The GPS is much more apt to measure bigger elevation deviations and
therefore our calculated incination---which is used as a target---does not
suffice in combination with our small data set.

\noindent\textbf{Keywords:} Neuralnetwork, incinometer, error compensation, filtering.
}

\long\def\diskussion{
% Allmännt

% Resultat
När vi inspekterar resultatet syns det att det antigen är de sju loggfilernas
startpunkter i GPS-filen som inte stämmer överens eller att det är svårt att
matcha det lutnigsgivaren har mätt med det som beräknats med hjälp av GPS:en.

Eftersom att lutningen från lutningsgivaren subtraherat med accelerationen
dividerat med tyngdaccelerationen inte blev lika med den beräknade lutningen
från GPS:en, se figur~\ref{fig:phiresult}, innebär det att det antigen finns
mätbrus från lutningsgivaren eller att den beräknade lutningen från GPS:en
är svår att korrelera med den från lutningsgivaren.
Det kan även vara båda två som gäller.

Alltså fungerar neuronnätet bättre än förväntat, svårigheten är att korrelera
den beräknade lutningen med den uppmätta och således är det vårt ``facit'' som
är lite undermåligt.

Olika fjädringsrörelser och ojämnheter i vägen kan motsvara en avvikelse på upp
till \SI{3}{\percent}, alltså får inte en funktion som till exempel extra hög
motoreffekt som aktiveras när lutningen är över \SI{2}{\percent} aktiveras
av låt säga en grop.
Därmed kommer den i praktiken aktiveras när den felkompenserade lutningen från
lutningsgivaren överstiger \SI{3}{\percent}.
Vilket innebär att med vår avvikelse skulle en sådan funktion mer eller mindre
kunna aktiveras även när bussen står på nästan plant underlag.
Alltså uppfyller den inte den tumregel på en avvikelse av maximalt
\SI{1}{\percent} som Erik Lauri advocerade.
Därmed skulle den vara olämplig att använda i ett riktigt fordon.

% METOD
% - Fördelar
En av de fördelar som finns med vår metod är att vi använder oss av
NARX-nät som är mycket välanpassade till att användas för tidsserier.
Samt att neuronnät i en perfekt värld klarar av att behandla alla de faktorer
som skulle kunna behövas felkompenseras.

% Felkällor
I praktiken fungerar däremot inte vår plan och har ett par felkällor.
Till och börja med testas varje neuronnätskonfiguration en gång med slumpade
begynnelse variabler vilket kan leda till att förlustfunktionen aldrig får fram
de mest optimala variablerna.
Om man istället testar varje konfiguration flera gånger kan man minska risken
för att de mest lämpade värdena inte hittas.
Alltså kan en mer lämpad konfiguration ha förbisetts i vår undersökning.

Dessutom är GPS:en mycket mindre finkänslig än lutningsgivaren, den ger bara
utslag för varje halvmeters elevations förändring medan lutningsgivaren reagerar
på minsta lilla rörelse och ger mycket precisa lutningsvärden.
Det här gör det ännu svårare att korrelera de båda filerna vilket innebär att
nätet kommer att vara svårare att träna eftersom att den kan förekomma stora
avvikelser i datan.
Ett exemper är att kring $x = 80$ i figur~\ref{fig:phiresult} ges
lutningen från lutningsgivaren som \SI{7}{\percent} medan den beräknades till
\SI{-5}{\percent} från GPS:en.

När vi validerar neuronnätens lämplighet för felkompensering sker det på testdatan,
vilket är nödvändigt på grund av att vi har små datamängder, men det blir därför
svårt att avgöra hur mycket det påverkat resultatet.
Vi har ju ingen annan data att testa på.
Antagligen spelar det roll vilket i så fall innebär att nätet tränas för att
klara av en specifik uppgift väldigt bra men det skulle vara olämpligt att
felkompensera annan data med nätet.
Därmed får vi antagligen en mindre kvadrerad förlust än vad nätet skulle få på
längre loggfiler.

% - Förbättringar
Det finns med andra ord vissa metodförbättringar som kan göras för att i
framtiden få bättre resultat.
När vi försöker hitta våra sju korta loggar i den väldigt långa loggen från
GPS:en blir det olika startpunkter när vi utgår ifrån accelerationen
gentemot den beräknade lutningen.
Ett alternativ är att anväda sig av två eller fler faktorer för
att garantera korrekta startpunkter tas fram.

Samt har vi läst om hur lutningsgivaren monteras på en rigg där alla rörelser
den utsätts för noga kan övervakas. Det skulle krävas betydligt mycker mer tid
och resurser än vad vi hade tillgång till men eftersom att det bevisligen
fungerar är det en beprövad förbättring för att uppnå önskat resultat.
}
