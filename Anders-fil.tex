\long\def\sammanfattning{

This study investigates the applicability of neuralnetworks in compensating inclinometers in electricbusses. The neuralnetwork was to predict the inclination with the acceleration and raw inclinometerdata as input. It was given an inclinationkey to learn from, which was calculated through minimizing a lossfunction with the altitude data from a GPS and the distance traveled, as variables.
Different setups of neuralnetworks were tested and the one with best result was a NARX-network with a mean squared error of 0,00206 which corresponds to a deviation of 2.72\%. The unofficial goal of having no more than 1\% deviation, which is an  standard at the company Volvo Busses, was not achieved. The neural network did manage to predict the inclination to a certain degree, but not as well as hoped. There were a few sources of error, such as static noise, vibration, insensitive measuring devices, few neuralnetwork structures tested. With in mind of all of the sources of error the neuralnetwork managed to produce an okay result. If these sources of error was eliminated there is a possibility of neuralnetworks being able to accurately predict inclination good enough for real usage.

}

\long\def\diskussion{

Att använda NARX-nät istället för feedforward kan vara en fördel när det gäller felkompensering. Feedforward kommer inte ihåg vilken data den har stött på innan och den behandlar varje datapunkt individuellt. Detta kan vara en fördel i vissa situationer men inte för felkompensering av lutningsgivare då tidigare datapunkter hänger samman med varandra. Fördelen med NARX-nät är att den kan komma ihåg tidigare värden och kan anpassa sin output efter dem, vilket kan förenkla processen att förutsäga nästa värde.
[ Källa: Youtube video – https://www.youtube.com/watch?v=epS9UVRuoOE –  Detta är något uppenbart som vilken kunnig person som helst kan komma fram till. Denna person pekade bara ut detta. Är en källa nödvändig i dessa fall? ]

Det gick inte att koppla in sig direkt i bussens styrenhet, vilket gjorde att sju enskilda loggar sparades. Dessa skulle sedan pusslas ihop med Gps:ens motsvarande data, vilket kan ha medfört felplaceringar och därmed inte helt korrekt data.

Skillnaden i mätsensitivitet mellan Gps:en och lutningsgivaren kan ha gett upphov till inkorrekta beräkningar. Eftersom Gps:en kunde endast mäta skillnad på halvmetern, så bör datan vara +-0.25 meter inom den riktiga höjden. Detta gör att inkorrekta beräkningar utförs på grund av inkorrekt mätdata. Eftersom det måste ske en större höjd elevation för att Gps:en ska märka av höjdförändring så går det längre perioder mellan varje nytt värde av höjden. Om då höjden har en viss felmarginal så kommer den att kvarstå under en längre period jämfört med lutningsgivaren som är mycket känslig och uppdaterar sig ofta.

Neuronnätet lyckades approximera den beräknade lutningen (se figur 9), men det inofficiella målet, att avvikelsen skulle inte överstiga 1\%, nåddes inte. Neuronnätet når inte standarden av maximalt 1\% avvikelse och är därmed inte lämpad för riktig användning. Den uppmätta lutningen gav inte ett svar som gick att enkelt korrelera med den beräknade lutningen. Lutningsgivare kan ha givit opålitliga mätvärden eller så kan det ha varit en inkorrekt beräknad, uppmätt eller behandlad acceleration. Med hjälp av bildredigeringsprogram så analyserades figur 8 och antalet pixlar mättes och jämfördes med axlarna, och lutningsgivaren mättes till att maximalt ha ett mätbrus på +-0.142\% lutning. På samma sätt undersöktes en specifik del i mätdatan i figur 8 som indikerade att lutningsgivaren kan skaka. Mätdatan visar att direkt efter bussen hade stannat så fortsatte lutningsgivaren att ge utslag i form av en dämpad sinuskurva, därmed slutsatsen att lutningsgivaren skakar. Med samma metod som innan så uppmättes den maximala skakningen till att kunna ge utslag på +-1.49\% lutning.

Det finns en risk att accelerationen är opålitlig. En sak som skulle kunna påverka är faktumet att deriveringen utfördes innan filtret slätade ut grafen. Detta beror på att när man deriverar en spretig graf så blir den exponentiellt mer och mer spretig, ju spretigare den var från första början. Detta gör det mycket svårt för filtret att tona ned alla spikar utan att totalt platta till grafen där det inte är några spikar. Filtret tar inte så stor hänsyn till extremvärden och därmed så måste spikarna lämnas för att inte bli av med någorlunda bra värden. Detta gör att när denna graf ska korreleras med en graf utan spikar så finner man en lägre korrelation. Detta skulle kunna lösas delvis genom att släta till hastighet-tids-grafen först och sedan derivera den, då man minimerar hur spretig grafen är innan man deriverar den.

}

\input{main.tex}